---
const { url, frontmatter } = Astro.props;
import "../styles/global.css";
import { Image } from 'astro:assets';

const images = import.meta.glob('/src/assets/blogImages/*', { eager: true });
const getImagePath = (imageName: string) => {
  const imagePath = `/src/assets/blogImages/${imageName}`;
  return (images[imagePath] as any)?.default || null;
};

const imageSrc = getImagePath(frontmatter.image.src);
---

<a href={url} class="block w-full sm:max-w-sm md:max-w-md lg:max-w-lg mx-auto">
  <div class="bg-white dark:bg-gray-900 rounded-2xl shadow-md overflow-hidden border border-gray-200 dark:border-gray-700 transition-transform hover:scale-[1.01] duration-200 ease-in-out">
    
    <!-- Image Section -->
    {imageSrc && (
      <div class="w-full aspect-[16/9] sm:aspect-[4/3] md:aspect-[3/2] overflow-hidden">
        <Image 
          src={imageSrc}
          width={800}
          height={450}
          class="object-cover w-full h-full"
          alt={frontmatter.image.alt}
          format="webp"
          quality="mid"
        />
      </div>
    )}
    
    <!-- Text Section -->
    <div class="p-4 sm:p-5">
      <!-- Title -->
      <h2 class="text-lg sm:text-xl font-bold text-gray-800 dark:text-white mb-1">
        {frontmatter.title}
      </h2>
      
      <!-- Description -->
      <p class="text-sm sm:text-base text-gray-600 dark:text-gray-300 mb-3 line-clamp-2">
        {frontmatter.description}
      </p>
      
      <!-- Tags -->
      <div class="flex flex-wrap gap-2 mb-3">
        {frontmatter.tags?.map(tag => (
          <span class="bg-blue-100 dark:bg-blue-800 text-blue-800 dark:text-blue-100 text-xs px-2 py-1 rounded">
            {tag}
          </span>
        ))}
      </div>
      
      <!-- Author -->
      <p class="text-sm text-right text-gray-500 dark:text-gray-400">
        by {frontmatter.author}
      </p>
    </div>
  </div>
</a>
